@using Silvester.Pathfinder.Official.Web.Shared.Preferences;
@using Silvester.Pathfinder.Official.Web.Shared.Cards;
@using Silvester.Pathfinder.Official.Web.Shared.Tables;
@using Silvester.Pathfinder.Official.Web.Services;
@using Silvester.Pathfinder.Official.Web.Shared.Chips;

@if (Skill != null)
{
    <ComponentDetailsCard TEntity="IGetSkillById_Skills_Items" Entity="@Skill">
        <Title>
            <MudText Typo="Typo.h6">Skill</MudText>
        </Title>
        <Actions>
        </Actions>
        <LeftContent>
            <PreferenceCategory Title="Details">
                <PreferenceItemText Title="Name" Text="@context.Name" />
                <MudDivider />
                <PreferenceItemText Title="AC Penalty" Text="@context.HasArmorCheckPenalty.ToString()" />
                <MudDivider />
                <PreferenceItemText Title="Recall Knowledge" Text="@context.HasRecallKnowledgeAction.ToString()" />
            </PreferenceCategory>

            <PreferenceCategory Title="Modifiers">
                <PreferenceItemChips Title="Stat">
                    <Chips>
                        <MudTooltip Text="@context.StatModifier.Abbreviation">
                            <TraitChip OnClick="@(() => OnStatClick())" Text="@context.StatModifier.Name" />
                        </MudTooltip>
                    </Chips>
                </PreferenceItemChips>
            </PreferenceCategory>
        </LeftContent>
        <RightContent>
            <PreferenceCategory Title="Description">
                <PreferenceItemText Text="@context.Description" />
            </PreferenceCategory>
        </RightContent>
    </ComponentDetailsCard>
}

@code {
    [Parameter]
    public IGetSkillById_Skills_Items Skill { get; set; } = default!;

    [Inject]
    public NavigationManager NavigationManager { get; set; } = default!;

    private void OnStatClick()
    {
        NavigationManager.NavigateTo($"stats");
    }
}